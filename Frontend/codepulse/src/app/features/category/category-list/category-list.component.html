<div class="container">
  <h1 class="mt-3">Category List</h1>
  <div class="d-flex justify-content-between mt-3">
    <div class="d-flex">
      <input type="text" class="form-control" #queryText />
      <button
        class="btn btn-secondary ms-2"
        (click)="onSearch(queryText.value)"
      >
        Search
      </button>
    </div>
    <a routerLink="/admin/categories/add" class="btn btn-primary"
      >Add Category</a
    >
  </div>
  @if (Categories$) {
  <table class="table table-border mt-3">
    <thead>
      <tr>
        <th>ID</th>
        <th>
          Name
          <span>
            <span>
              <button
                class="btn btn-light"
                (click)="onSort('name', 'asc')"
                type="button"
              >
                <i class="bi bi-arrow-up"></i>
              </button>
            </span>
            <span>
              <button
                class="btn btn-light"
                (click)="onSort('name', 'desc')"
                type="button"
              >
                <i class="bi bi-arrow-down"></i>
              </button>
            </span>
          </span>
        </th>
        <th>
          URL Handle
          <span>
            <span>
              <button
                class="btn btn-light"
                (click)="onSort('url', 'asc')"
                type="button"
              >
                <i class="bi bi-arrow-up"></i>
              </button>
            </span>
            <span>
              <button
                class="btn btn-light"
                (click)="onSort('url', 'desc')"
                type="button"
              >
                <i class="bi bi-arrow-down"></i>
              </button>
            </span>
          </span>
        </th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      @for (category of Categories$ | async; track category.id) {
      <tr>
        <td>{{ category.id }}</td>
        <td>{{ category.name }}</td>
        <td>{{ category.urlHandle }}</td>
        <td>
          <a
            [routerLink]="['/admin/categories/', category.id]"
            class="btn btn-secondary"
            >Edit</a
          >
        </td>
      </tr>
      }
    </tbody>
  </table>

  <nav aria-label="Page navigation example">
    <ul class="pagination">
      <li class="page-item"><a class="page-link pointer" (click)="getPreviousPage()" >Previous</a></li>
       @for (item of list; track $index) {
      <li class="page-item"><a class="page-link pointer" 
        (click)="getPage($index+1,pageSize)"
        >{{$index+1}}</a></li>
       }
      <li class="page-item"><a class="page-link pointer" (click)="getNextPage()">Next</a></li>
    </ul>
  </nav>
  }
</div>
